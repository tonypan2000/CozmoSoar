# When the handle-new-task-command substate is finished (no other operators)
#    create a new task segment to be pushed onto the task-stack
                                                        
sp {handle-new-task-command*propose*create-new-task-segment
   (state <s> ^name handle-new-task-command
              ^task-operator <op>
             -^new-task-segment)
-->
   (<s> ^operator <o> +)
   (<o> ^name create-new-task-segment)
}

sp {handle-new-task-command*apply*create-new-task-segment
   (state <s> ^name handle-new-task-command
              ^operator.name create-new-task-segment
              ^command-message <msg>
              ^task-operator <op>)
   (<msg> -^task-source)
-->
   (<s> ^new-task-segment <task>)
   (<task> ^task-operator <op>)
}

sp {handle-new-task-command*apply*create-new-task-segment*task-subtask
   (state <s> ^name handle-new-task-command
              ^operator.name create-new-task-segment
              ^command-message <msg>
              ^task-operator <op>)
   (<msg> ^task-source <src>)
-->
   (<s> ^new-task-segment <task>)
   (<task> ^task-source <src>
           ^task-operator <op>)
}

