## Do an smem query to lookup the smem info about the task
sp {add-subtask-to-tcn*elaborate*smem-query*task*handle
   (state <s> ^name add-subtask-to-tcn
              ^task-operator.task-handle <task-handle>)
-->
   (<s> ^smem-query <query>)
   (<query> ^cue <cue>
            ^depth 10)
   (<cue> ^handle <task-handle>)
}

# Elaborate task-concept-network from the result of the smem query
sp {add-subtask-to-tcn*elaborate*task-concept-network*from*smem-query
   (state <s> ^name add-subtask-to-tcn
              ^task-operator.task-handle <task-handle>
              ^smem-query.result <res>)
   (<res> ^handle <task-handle>)
-->
   (<s> ^task-concept-network <res>)
}
## Do an smem query to lookup the smem info about the subtask
sp {add-subtask-to-tcn*elaborate*smem-query*subtask*handle
   (state <s> ^name add-subtask-to-tcn
              ^subtask.task-handle <task-handle>)
-->
   (<s> ^smem-query <query>)
   (<query> ^cue <cue>
            ^depth 10)
   (<cue> ^handle <task-handle>)
}

# Elaborate subtask-tcn from the result of the smem query
sp {add-subtask-to-tcn*elaborate*subtask-tcn*from*smem-query
   (state <s> ^name add-subtask-to-tcn
              ^subtask.task-handle <task-handle>
              ^smem-query.result <res>)
   (<res> ^handle <task-handle>)
-->
   (<s> ^subtask-tcn <res>)
}
