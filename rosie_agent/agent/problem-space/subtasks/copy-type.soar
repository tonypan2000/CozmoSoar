# problem-space.subtasks.copy-type << deep shallow >>
#		Whether the subtasks copy is shallow (elaborates the same identifier)
#			or deep (all substructure is deep copied)
#
# For deep copy implementation, see deep-copy-subtasks.soar

# Copy-type shallow: just elaborate the same identifier
sp {problem-space*subtasks*copy-type*shallow*elaborate*subtasks
   (state <s> ^problem-space.subtasks <subs>)
   (<subs> ^copy-type shallow
           ^source <source>)
-->
   (<s> ^subtasks <source>)
}

# Copy-type deep: use the deep-copy-subtasks structure to facilitate

# Note: For a deep copy of subtasks, you must also have a deep copy of the world
sp {problem-space*subtasks*copy-type*deep*elaborate*deep-copy-subtasks
   (state <s> ^problem-space.subtasks <subs>)
   (<subs> ^copy-type deep
           ^source <source>)
-->
   (<s> ^deep-copy-subtasks <dcs>)
   (<dcs> ^source <source>)
}

# copy-type deep: copy the result onto the state from the deep-copy-subtasks structure
sp {problem-space*subtasks*copy-type*deep*elaborate*subtasks*copy*from*deep-copy-subtasks           
   (state <s> ^problem-space.subtasks <subs>
              ^deep-copy-subtasks <dcs>)
   (<subs> ^copy-type deep
           ^source <source>)
   (<dcs> ^source <source>
          ^copy <copy>)
-->
   (<s> ^subtasks <copy>)
}
