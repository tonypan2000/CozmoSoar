sp {topstate*elaborate*map
   (state <s> ^superstate nil)
-->
   (<s> ^maps <maps>)
   (<maps> ^map <building> <world>)

   (<world> ^handle world-map ^waypoint <bwp01>)
   (<bwp01> ^handle bwp01 ^x 0 ^y 0 ^map <world> ^sub-map <building>)

   ### BUILDING ###

   (<building> ^handle bmap1 ^super-waypoint <bwp01>
       ^waypoint <wp01> <wp02> <wp03> )

   ### WAYPOINTS ###

  (<wp01> ^handle wp01 ^handle-int 1 ^x 0.0 ^y 0.0 ^map <building>)
   (<wp01> ^edge <e0103>)
    (<e0103> ^start <wp01> ^end <wp03> ^wall-side 1
         ^doorway true ^door_sx 0.00023338822492857165 ^door_sy -0.5430000453917213 ^door_ex -0.00023338822492857165 ^door_ey -1.7429999546082788)

  (<wp02> ^handle wp02 ^handle-int 2 ^x -3.81 ^y 0.0 ^map <building>)
   (<wp02> ^edge <e0203>)
    (<e0203> ^start <wp02> ^end <wp03> ^wall-side 1
         ^doorway true ^door_sx -3.8097666117750717 ^door_sy -0.5430000453917213 ^door_ex -3.8102333882249284 ^door_ey -1.7429999546082788)

  (<wp03> ^handle wp03 ^handle-int 3 ^x -1.905 ^y -2.159 ^map <building>)
   (<wp03> ^edge <e0301>)
    (<e0301> ^start <wp03> ^end <wp01> ^wall-side -1
         ^doorway true ^door_sx -0.00023338822492857165 ^door_sy -1.7429999546082788 ^door_ex 0.00023338822492857165 ^door_ey -0.5430000453917213)
   (<wp03> ^edge <e0302>)
    (<e0302> ^start <wp03> ^end <wp02> ^wall-side -1
         ^doorway true ^door_sx -3.8102333882249284 ^door_sy -1.7429999546082788 ^door_ex -3.8097666117750717 ^door_ey -0.5430000453917213)

}
