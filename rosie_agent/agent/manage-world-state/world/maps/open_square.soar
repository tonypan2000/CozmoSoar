sp {topstate*elaborate*map
   (state <s> ^superstate nil)
-->
   (<s> ^maps <maps>)
   (<maps> ^map <building> <world>)

   (<world> ^handle world-map ^waypoint <bwp01>)
   (<bwp01> ^handle bwp01 ^x 0 ^y 0 ^map <world> ^sub-map <building>)

   ### BUILDING ###

   (<building> ^handle bmap1 ^super-waypoint <bwp01>
       ^waypoint <wp01> <wp02> <wp03> <wp04> <wp05> 
       ^waypoint <wp06> <wp07> <wp08> )

   ### WAYPOINTS ###

  (<wp01> ^handle wp01 ^handle-int 1 ^x 3.75 ^y -3.75 ^map <building>)
   (<wp01> ^edge <e0102>)
    (<e0102> ^start <wp01> ^end <wp02> ^wall-side 1)
   (<wp01> ^edge <e0103>)
    (<e0103> ^start <wp01> ^end <wp03> ^wall-side 1)
   (<wp01> ^edge <e0104>)
    (<e0104> ^start <wp01> ^end <wp04> ^wall-side 1)
   (<wp01> ^edge <e0105>)
    (<e0105> ^start <wp01> ^end <wp05> ^wall-side 1)
   (<wp01> ^edge <e0106>)
    (<e0106> ^start <wp01> ^end <wp06> ^wall-side 1)
   (<wp01> ^edge <e0107>)
    (<e0107> ^start <wp01> ^end <wp07> ^wall-side 1)
   (<wp01> ^edge <e0108>)
    (<e0108> ^start <wp01> ^end <wp08> ^wall-side 1)

  (<wp02> ^handle wp02 ^handle-int 2 ^x 8.75 ^y -3.75 ^map <building>)
   (<wp02> ^edge <e0201>)
    (<e0201> ^start <wp02> ^end <wp01> ^wall-side -1)
   (<wp02> ^edge <e0203>)
    (<e0203> ^start <wp02> ^end <wp03> ^wall-side 1)
   (<wp02> ^edge <e0204>)
    (<e0204> ^start <wp02> ^end <wp04> ^wall-side 1)
   (<wp02> ^edge <e0205>)
    (<e0205> ^start <wp02> ^end <wp05> ^wall-side 1)
   (<wp02> ^edge <e0206>)
    (<e0206> ^start <wp02> ^end <wp06> ^wall-side 1)
   (<wp02> ^edge <e0207>)
    (<e0207> ^start <wp02> ^end <wp07> ^wall-side 1)
   (<wp02> ^edge <e0208>)
    (<e0208> ^start <wp02> ^end <wp08> ^wall-side 1)

  (<wp03> ^handle wp03 ^handle-int 3 ^x 13.75 ^y -3.75 ^map <building>)
   (<wp03> ^edge <e0301>)
    (<e0301> ^start <wp03> ^end <wp01> ^wall-side -1)
   (<wp03> ^edge <e0302>)
    (<e0302> ^start <wp03> ^end <wp02> ^wall-side -1)
   (<wp03> ^edge <e0304>)
    (<e0304> ^start <wp03> ^end <wp04> ^wall-side 1)
   (<wp03> ^edge <e0305>)
    (<e0305> ^start <wp03> ^end <wp05> ^wall-side 1)
   (<wp03> ^edge <e0306>)
    (<e0306> ^start <wp03> ^end <wp06> ^wall-side 1)
   (<wp03> ^edge <e0307>)
    (<e0307> ^start <wp03> ^end <wp07> ^wall-side 1)
   (<wp03> ^edge <e0308>)
    (<e0308> ^start <wp03> ^end <wp08> ^wall-side 1)

  (<wp04> ^handle wp04 ^handle-int 4 ^x 3.75 ^y -8.75 ^map <building>)
   (<wp04> ^edge <e0401>)
    (<e0401> ^start <wp04> ^end <wp01> ^wall-side -1)
   (<wp04> ^edge <e0402>)
    (<e0402> ^start <wp04> ^end <wp02> ^wall-side -1)
   (<wp04> ^edge <e0403>)
    (<e0403> ^start <wp04> ^end <wp03> ^wall-side -1)
   (<wp04> ^edge <e0405>)
    (<e0405> ^start <wp04> ^end <wp05> ^wall-side 1)
   (<wp04> ^edge <e0406>)
    (<e0406> ^start <wp04> ^end <wp06> ^wall-side 1)
   (<wp04> ^edge <e0407>)
    (<e0407> ^start <wp04> ^end <wp07> ^wall-side 1)
   (<wp04> ^edge <e0408>)
    (<e0408> ^start <wp04> ^end <wp08> ^wall-side 1)

  (<wp05> ^handle wp05 ^handle-int 5 ^x 13.75 ^y -8.75 ^map <building>)
   (<wp05> ^edge <e0501>)
    (<e0501> ^start <wp05> ^end <wp01> ^wall-side -1)
   (<wp05> ^edge <e0502>)
    (<e0502> ^start <wp05> ^end <wp02> ^wall-side -1)
   (<wp05> ^edge <e0503>)
    (<e0503> ^start <wp05> ^end <wp03> ^wall-side -1)
   (<wp05> ^edge <e0504>)
    (<e0504> ^start <wp05> ^end <wp04> ^wall-side -1)
   (<wp05> ^edge <e0506>)
    (<e0506> ^start <wp05> ^end <wp06> ^wall-side 1)
   (<wp05> ^edge <e0507>)
    (<e0507> ^start <wp05> ^end <wp07> ^wall-side 1)
   (<wp05> ^edge <e0508>)
    (<e0508> ^start <wp05> ^end <wp08> ^wall-side 1)

  (<wp06> ^handle wp06 ^handle-int 6 ^x 3.75 ^y -13.75 ^map <building>)
   (<wp06> ^edge <e0601>)
    (<e0601> ^start <wp06> ^end <wp01> ^wall-side -1)
   (<wp06> ^edge <e0602>)
    (<e0602> ^start <wp06> ^end <wp02> ^wall-side -1)
   (<wp06> ^edge <e0603>)
    (<e0603> ^start <wp06> ^end <wp03> ^wall-side -1)
   (<wp06> ^edge <e0604>)
    (<e0604> ^start <wp06> ^end <wp04> ^wall-side -1)
   (<wp06> ^edge <e0605>)
    (<e0605> ^start <wp06> ^end <wp05> ^wall-side -1)
   (<wp06> ^edge <e0607>)
    (<e0607> ^start <wp06> ^end <wp07> ^wall-side 1)
   (<wp06> ^edge <e0608>)
    (<e0608> ^start <wp06> ^end <wp08> ^wall-side 1)

  (<wp07> ^handle wp07 ^handle-int 7 ^x 8.75 ^y -13.75 ^map <building>)
   (<wp07> ^edge <e0701>)
    (<e0701> ^start <wp07> ^end <wp01> ^wall-side -1)
   (<wp07> ^edge <e0702>)
    (<e0702> ^start <wp07> ^end <wp02> ^wall-side -1)
   (<wp07> ^edge <e0703>)
    (<e0703> ^start <wp07> ^end <wp03> ^wall-side -1)
   (<wp07> ^edge <e0704>)
    (<e0704> ^start <wp07> ^end <wp04> ^wall-side -1)
   (<wp07> ^edge <e0705>)
    (<e0705> ^start <wp07> ^end <wp05> ^wall-side -1)
   (<wp07> ^edge <e0706>)
    (<e0706> ^start <wp07> ^end <wp06> ^wall-side -1)
   (<wp07> ^edge <e0708>)
    (<e0708> ^start <wp07> ^end <wp08> ^wall-side 1)

  (<wp08> ^handle wp08 ^handle-int 8 ^x 13.75 ^y -13.75 ^map <building>)
   (<wp08> ^edge <e0801>)
    (<e0801> ^start <wp08> ^end <wp01> ^wall-side -1)
   (<wp08> ^edge <e0802>)
    (<e0802> ^start <wp08> ^end <wp02> ^wall-side -1)
   (<wp08> ^edge <e0803>)
    (<e0803> ^start <wp08> ^end <wp03> ^wall-side -1)
   (<wp08> ^edge <e0804>)
    (<e0804> ^start <wp08> ^end <wp04> ^wall-side -1)
   (<wp08> ^edge <e0805>)
    (<e0805> ^start <wp08> ^end <wp05> ^wall-side -1)
   (<wp08> ^edge <e0806>)
    (<e0806> ^start <wp08> ^end <wp06> ^wall-side -1)
   (<wp08> ^edge <e0807>)
    (<e0807> ^start <wp08> ^end <wp07> ^wall-side -1)

}
